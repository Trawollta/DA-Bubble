<div class="allMessages">
    <div *ngFor="let message of filterMessages(); let i = index"> 
        <!-- Debugging: Zeigt jede Nachricht im JSON-Format -->
        <p>📩 Nachricht in ngFor: {{ message | json }}</p>

        <p>🔍 Sender ID: {{ message.sender.id }}</p>
        <p>🛠 meetContitionsOtherUser: {{ meetContitionsOtherUser(message.sender.id) }}</p>
        <p>🛠 meetContitionsCurrentUser: {{ meetContitionsCurrentUser(message.sender.id) }}</p>

        <!-- Falls der Sender nicht der aktuelle Benutzer ist -->
        <app-other-user-message *ngIf="meetContitionsOtherUser(message.sender.id)" 
            [message]="message" 
            [isThread]="isThread"
            (click)="GlobalFunctionsService.openReactionDialog()">
        </app-other-user-message>

        <!-- Falls der Sender der aktuelle Benutzer ist -->
        <app-current-user-message 
    *ngIf="meetContitionsCurrentUser(message.sender.id)" 
    [message]="message" 
    [index]="i" 
    [isThread]="isThread">
</app-current-user-message>


        <!-- Falls die Nachricht ein neues Datum hat -->
        <div class="dateBlockContainer">
            <ng-container *ngIf="showDateBar(message.timestamp, i, message.message)"> 
                <div class="newDate">
                    <div class="leftBar"></div>
                    <div class="dateContainer">
                        <span *ngIf="getWeekDay(message.timestamp) === 'Heute'">
                            {{ getWeekDay(message.timestamp) }}
                        </span>
                        <span *ngIf="getWeekDay(message.timestamp) !== 'Heute'">
                            {{ getWeekDay(message.timestamp) }},
                        </span>
                        <span *ngIf="getWeekDay(message.timestamp) !== 'Heute'">
                            {{ message.timestamp | date : 'dd.MM.YY'}}
                        </span>
                    </div>
                    <div class="rightBar"></div>
                </div>
            </ng-container>
        </div>
    </div>
    <div #scrolldown class="chatEnd"></div>
</div>
